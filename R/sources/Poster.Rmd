---
title: IS ACCESS TO UNIVERSITY FAIR?
main_fontfamily: Arial

author:
  - name: Carlota Vieira - 20210684
    main: true
  - name: Felix - 
    main: true
  - name: Inês - 20220052
    main: true
  - name: Samuel -
    main: true

column_numbers: 3
logoright_name: https&#58;www.unl.pt/sites/default/files/styles/large/public/ims_noticia_a.png

primary_colour: "#B2D23C"
secondary_colour: "#9ACD32"
columnline_col: "#9ACD32"
author_textcol: "#515B61"

output: 
  posterdown::posterdown_html:
    self_contained: false
bibliography: packages.bib
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

```{r libraries, include = FALSE}
library(ggplot2)
library(dplyr)
library(RMySQL)
library(tidyr)
library(base)
library(plm)
```

```{r database, include=FALSE}
con <- dbConnect(MySQL(),
                 host = "localhost",
                 user = "root",
                 password = "password",
                 dbname = "NOVAENES")

query1 <- "select * from vwenes_full;"
result1 <- dbSendQuery(con, query1)
vwENES_full <- dbFetch(result1, n = -1)
dbClearResult(result1)

query2 <- "select * from vwenes;"
result2 <- dbSendQuery(con, query2)
vwENES <- dbFetch(result2, n = -1)
dbClearResult(result2)

dbDisconnect(con)
```

```{r filterenes_full, include=FALSE}
filtered_enes_full <- data.frame(id = vwENES_full$ID,
                                 schoolName = vwENES_full$schoolName,
                                 District = vwENES_full$District,
                                 PubPriv = vwENES_full$PubPriv,
                                 examTitle = vwENES_full$examTitle,
                                 gender = vwENES_full$gender,
                                 coursename = vwENES_full$coursename,
                                 examyear = vwENES_full$examyear,
                                 bonus_int_vs_national = vwENES_full$bonus_int_vs_national,
                                 bonus_int_national_adjusted = vwENES_full$bonus_int_national_adjusted,
                                 nuts2 = vwENES_full$NUTS2_NAME,
                                 nuts3 = vwENES_full$NUTS3_NAME, 
                                 gradeexam = vwENES_full$gradeexam)
```

```{r filterenes, include=FALSE}
filtered_enes <- data.frame(id = vwENES$ID,
                            schoolName = vwENES$schoolName,
                            District = vwENES$District,
                            PubPriv = vwENES$PubPriv,
                            examTitle = vwENES$examTitle,
                            gender = vwENES$gender,
                            coursename = vwENES$coursename,
                            examyear = vwENES$examyear,
                            bonus_int_vs_national = vwENES$bonus_int_vs_national,
                            bonus_int_national_adjusted = vwENES$bonus_int_national_adjusted,
                            nuts2 = vwENES$NUTS2_NAME,
                            nuts3 = vwENES$NUTS3_NAME, 
                            gradeexam = vwENES$gradeexam)
```

# Introduction

Access to University courses is determined in Portugal by several factors. The most impactful are the results in the national exams (equal across the country and anonymously corrected by independent examiners) and the grades from secondary education, that mostly result from evaluation inside the school but can in some cases also include exam results (for students failing internal approval). Students are then serialized and placed according to available vacancies (we're disregarding special contingents that some courses, namely for disabilities or students coming from Azores/Madeira).

We used publicly available information from the Ministry of Education (ENES), years 2008-2019, to assess the fairness of this evaluations.

We considered phase 1 exams for internal students from 2008 until 2019, with a result above 9,4, for disciplines with more than 50.000 exams. These filters mimic Ministerio da Educação's approach in InfoEscolas, and are intended to make the analysis more reliable.

# Objective

To provide a more accurate and fair method for comparing school grades by establishing genuine comparability through our model, taking into account factors such as time, location, and school type in order to level the playing field and improve assessments of school performance.

# Methodology

This will be our methodology. We can include bullet points according to:
- Interviews
- Surveys
- Comparison studies
- Experiments
We can also show studies of existing literature that were used as references.

# Results

## Step 1

To get a sense of the distribution of exam grades, we counted the number of exams with each possible result, up to 1 decimal place, from 0.0 up to 20.0.

```{r plot1, out.width='100%', fig.align='center', fig.height=4}
grades <- vwENES_full %>% 
  count(gradeexam)

ggplot(grades, aes(gradeexam, n)) + 
  geom_line() + 
  ggtitle("Grade Exam count") + 
  xlab("Gradeexam") + 
  ylab("count") +
  theme(plot.title = element_text(hjust = 0.5))
```

This may be one of those pictures that are worth a thousand words. This distribution looks like a normal distribution with a repeated pattern, where grades ending with 3 or 4 decimal places are very frequently upped so that, by ending with 5, it will be rounded up to the next integer value. This effect is less evident, but also present between .9/.0.
This effect is exacerbated between 9.3/9.4 and 9.5, which represents the difference between approving or failing and, in the latter, potentially staying one more year in secondary education.

## Step 2

We then calculated the average for each exam, across this time period, considering four series: Male/Female and Public/Private school.

```{r plot2, out.width='80%', fig.align='center', fig.height=4}
plot(mtcars[1:2])
```

We can see that the average for private schools is consistently higher than the average for public schools. There does not seem to be a gender-based difference for different exams, with the notable exception of "Portugues".

Because every student in the country takes exactly the same exam, it should on average be a fair representation of the student's knowledge, compared to other students.
* Comments to add here: mention law of large numbers and central limit theorem *

There might be several explanations for having higher scores in private schools, including better socioeconomic conditions of those families.

## Step 3

Based on the previous assumption, we went on to estimate the internal result based on the exam grade. We defined as "bonus" the difference between the actual internal grade and what we expected, based on the exam. We measured this bonus for the 8 most common exams across the 2008-2019 period.

```{r plot3, out.width='80%', fig.align='center', fig.height=3.5}
plot(mtcars[1:2])
```

There is a statistically significant and quantitatively relevant impact on the internal grade based on both gender (bonus for female students) and for the system the student attends (bonus for private schools). These two bonus are cummulative, resulting in the bonus for female students in private schools being .9 above the bonus for male students in public schools.

# Next Steps

There is any?

# Conclusion

Something

# References
